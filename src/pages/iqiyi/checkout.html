<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>确认订单 - 爱奇艺</title>
  <link rel="stylesheet" href="../../App.css">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="checkout.css">
</head>
<body>
  <div class="iqiyi-app">
    <!-- 顶部导航栏 -->
    <header class="top-header" data-testid="header">
      <div class="header-left">
        <a href="index.html" class="logo" data-testid="header-logo">
          <span class="logo-text">iQIYI</span>
        </a>
      </div>
      <div class="header-center">
        <div class="search-box" data-testid="search-box">
          <input type="text" class="search-input" data-testid="search-input" placeholder="搜索视频">
          <button class="search-btn" data-testid="search-btn">🔍 搜索</button>
        </div>
      </div>
      <div class="header-right">
        <a href="cart.html" class="icon-btn" data-testid="header-cart-btn">🛒</a>
        <div class="user-menu" data-testid="user-menu">
          <div class="user-avatar" data-testid="user-avatar">
            <img src="../../public/images/iqiyi/avatar.svg" alt="用户头像">
          </div>
          <div class="user-dropdown" data-testid="user-dropdown">
            <div class="user-dropdown-inner">
              <div class="dropdown-header">
                <div class="dropdown-user">
                  <img src="../../public/images/iqiyi/avatar.svg" alt="" class="dropdown-avatar">
                  <div class="dropdown-user-info">
                    <span class="dropdown-username" data-testid="dropdown-username">用户086914</span>
                    <span class="dropdown-subtitle">登录同步多设备历史</span>
                  </div>
                </div>
              </div>
              <div class="dropdown-vip-promo">
                <div class="vip-promo-left">
                  <span class="vip-promo-title">开通VIP会员</span>
                  <span class="vip-promo-desc">🔥 大剧热综 · ⭐ 高分大片 · 📺 1080P</span>
                </div>
                <a href="checkout.html" class="vip-promo-btn" data-testid="dropdown-vip-btn">立即开通</a>
              </div>
              <ul class="dropdown-menu">
                <li><a href="profile.html?tab=history" data-testid="dropdown-history"><span class="menu-icon">🕐</span> 观看历史</a></li>
                <li><a href="profile.html?tab=favorite" data-testid="dropdown-favorite"><span class="menu-icon">➕</span> 在追</a></li>
                <li><a href="profile.html?tab=subscribe" data-testid="dropdown-subscribe"><span class="menu-icon">📅</span> 预约</a></li>
                <li><a href="cart.html" data-testid="dropdown-wallet"><span class="menu-icon">💰</span> 钱包</a></li>
              </ul>
              <div class="dropdown-footer">
                <a href="profile.html" class="profile-link" data-testid="dropdown-profile">进入个人中心 ›</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="checkout-main" data-testid="checkout-main">
      <div class="checkout-container">
        <h1 class="page-title" data-testid="checkout-title">💳 确认订单</h1>

        <div class="checkout-content" data-testid="checkout-content">
          <!-- 订单信息 -->
          <div class="checkout-left">
            <!-- 用户信息 -->
            <section class="checkout-section" data-testid="user-info-section">
              <h3 class="section-title">账户信息</h3>
              <div class="user-info-card" data-testid="user-info-card">
                <div class="user-avatar">
                  <img src="../../public/images/iqiyi/avatar.svg" alt="">
                </div>
                <div class="user-details">
                  <p class="username" data-testid="checkout-username">用户086914</p>
                  <p class="user-status" data-testid="checkout-user-status">VIP5 会员</p>
                </div>
              </div>
            </section>

            <!-- 订单商品 -->
            <section class="checkout-section" data-testid="order-items-section">
              <h3 class="section-title">订单商品</h3>
              <div class="order-items" id="order-items" data-testid="order-items"></div>
            </section>

            <!-- 支付方式 -->
            <section class="checkout-section" data-testid="payment-section">
              <h3 class="section-title">支付方式</h3>
              <div class="payment-methods" id="payment-methods" data-testid="payment-methods"></div>
            </section>

            <!-- 优惠券 -->
            <section class="checkout-section" data-testid="coupon-section">
              <h3 class="section-title">优惠券</h3>
              <div class="coupon-input" data-testid="coupon-input-area">
                <input type="text" id="coupon-code" data-testid="coupon-input" placeholder="输入优惠券代码">
                <button data-testid="coupon-apply-btn" onclick="applyCoupon()">应用</button>
              </div>
              <div class="coupon-error" id="coupon-error" data-testid="coupon-error"></div>
              <p class="coupon-hint" data-testid="coupon-hint">试试: VIP10 或 NEW20</p>
            </section>
          </div>

          <!-- 订单汇总 -->
          <div class="checkout-right" data-testid="order-summary-section">
            <div class="order-summary" data-testid="order-summary">
              <h3>订单汇总</h3>
              
              <div class="summary-row" data-testid="summary-original">
                <span>商品金额</span>
                <span id="original-price" data-testid="original-price">¥0</span>
              </div>
              
              <div class="summary-row discount" data-testid="summary-member-discount">
                <span>会员优惠</span>
                <span id="member-discount" data-testid="member-discount">-¥0</span>
              </div>
              
              <div class="summary-row discount" id="coupon-row" data-testid="summary-coupon" style="display:none;">
                <span>优惠券</span>
                <span id="coupon-discount" data-testid="coupon-discount">-¥0</span>
              </div>
              
              <div class="summary-divider"></div>
              
              <div class="summary-row total" data-testid="summary-total">
                <span>应付金额</span>
                <span class="total-price" id="final-price" data-testid="final-price">¥0</span>
              </div>

              <button class="submit-btn" id="submit-btn" data-testid="submit-order-btn" onclick="submitOrder()">
                立即支付
              </button>

              <p class="agreement" data-testid="agreement">
                点击支付即表示同意
                <a href="#" data-testid="agreement-link">《用户服务协议》</a>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- 支付成功弹窗 -->
      <div class="order-success" id="order-success" data-testid="order-success-modal" style="display:none;">
        <div class="success-content">
          <div class="success-icon">✅</div>
          <h2>支付成功！</h2>
          <p>您的VIP会员已开通</p>
          <div class="success-actions">
            <a href="index.html" class="btn-primary" data-testid="success-home-btn">返回首页</a>
            <a href="search.html" class="btn-secondary" data-testid="success-watch-btn">开始观看</a>
          </div>
        </div>
      </div>
    </main>

    <!-- 底部 -->
    <footer class="site-footer" data-testid="footer">
      <div class="footer-content">
        <div class="footer-logo">iQIYI</div>
        <p class="footer-text">© 2024 爱奇艺 版权所有</p>
      </div>
    </footer>
  </div>

  <script src="../../data/iqiyiData.js"></script>
  <script src="checkout.js"></script>
</body>
</html>
